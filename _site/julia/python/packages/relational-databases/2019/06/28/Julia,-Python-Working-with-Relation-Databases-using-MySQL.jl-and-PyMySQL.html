<!DOCTYPE html>
<html lang=" en ">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Estadistika</title>
  <meta name="description" content="statistics, data science, machine/deep learning">
  <meta name="theme-color" content="#1f1e1e">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="alternate" type="application/rss+xml" title="Estadistika" href="/feed.xml">
  <link rel="alternate" type="application/rss+xml" title="Estadistika" href="/feed.julia.xml">
  <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>

  
  <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"></script> -->
  <!-- <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      TeX: {
        equationNumbers: {
          autoNumber: "AMS"
        }
      },
      tex2jax: {
        inlineMath: [ ['$','$'], ['\\(', '\\)'] ],
        displayMath: [ ['$$','$$'] ],
        processEscapes: true,
      }
    });
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> 
  <!-- <script type="text/javascript"
          src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script src="/assets/functions.js"></script>
</head>

<body>
    <div class="site-parent-container-blog">

        <header>
    <!-- <img src="/assets/bible-psalms.jpg"> -->
    <div class="site-sidebar">
        <div class="dropdown" style="display: none;">
            <button class="dropbtn"><a class="fa fa-bars" style="font-size: 24px !important;"></a></button>
            <div class="dropdown-content">
                <a id="home-button" href="/index.html">Home</a>
                <a href="/blog">Articles</a>
            </div>
        </div>
        <div id="website-name-wrapper" style="display: none;">
            <div id="website-name">
                <a style="color: white;" href="/index.html">Estadistika</a>
            </div>
            <div id="website-description">
                . . . statistics / machine learning / data science
            </div>
        </div>
        <nav>
            <button onclick='javascript:location.href="/"'>
                <i class="fas fa-home"></i>
            </button>
            <button onclick='javascript:location.href="/blog"'>
                <i class="fas fa-file-alt"></i>
            </button>
            <button onclick='javascript:location.href="/about"'>
                <i class="fas fa-info"></i>
            </button>
            <!-- <button onclick='javascript:location.href="#"'>
                <i class="fas fa-phone"></i>
            </button> -->
        </nav>
    </div>
</header>

        <main class="site-main-content">

            <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-header">
        <h1 class="post-title title-more-margin" itemprop="name headline">Interfacing with Relational Databases using MySQL.jl and PyMySQL</h1>
        <p class="post-meta">
            <time datetime="2019-06-28T12:00:00+08:00" itemprop="datePublished">
                 Jun 28, 2019
            </time>
             <i><span class="author-name">by</span></i>
            <span class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <span itemprop="name">Al-Ahmadgaid B. Asaad</span>
            </span>
            
        </p>
    </div>

    <div class="post-content" itemprop="articleBody">
        <p>Prior to the advent of computing, relational database can be thought of log books typically used for inventory and visitor’s time-in time-out. These books contain rows that define the item/transaction, and columns describing the features of each row. Indeed, these are the core attributes of any relational database. Unlike spreadsheets, which are used for handling small datasets, databases are mostly used for storing huge transactional data for later use. They run on a server and often at the backend of any user (client) interface such as websites and mobile applications. These applications communicate with database via processing servers. The figure below illustrates the request and response communcations between client and servers.
<img src="http://drive.google.com/uc?export=view&amp;id=1cedn62AXe6LS-jxCjXBxCYmL1iDFRlYQ" />
As mentioned earlier, databases are meant to store data for <i>later use</i> — in the sense that we can use it as a response to client’s requests, such as viewing or data extraction for insights. In this article, we are interested in data extraction from the database. In particular, the objective is to illustrate how to send request to MySQL server both from Julia and Python.</p>
<h3 id="mysql-server-setup">MySQL Server Setup</h3>
<p>To start with, we need to setup MySQL server in our machine. Click the following link to download and install the application.</p>

<ul>
  <li><a href="https://docs.google.com/document/d/1B3ol7-Hte08mqzB5J8dBn1wFlpkxZ1Lgb2W7OUpIu60/edit?usp=sharing">MySQL Server Download and Installation on macOS</a></li>
  <li><a href="https://docs.google.com/document/d/1GaZ5dPOH9o5rQPmxFWjGS4ZmUjEEeDM497UdXwcEgco/edit?usp=sharing">MySQL Server Download and Installation on Windows</a></li>
</ul>

<p>Note that I recommend you to download the latest version of MySQL since the setup above is using the old version.</p>
<h3 id="query-creating-database">Query: Creating Database</h3>
<p>In order to appreciate what we are aiming in this article, we need to go through some basic SQL queries, to understand what type of request to send to MySQL server. I’m using macOS, but the following should work on windows as well. For macOS user, open the MySQL Server Shell by running <code>mysql -u root -p</code> (hit Enter, and type in your MySQL root password you specified during the installation setup from the previous section) in the terminal. For windows, try to look for it in the Start Menu.
<img src="http://drive.google.com/uc?export=view&amp;id=1wRuD_gG4tJpp1ZKj3jCbwbzWAtERSjsn" style="margin: -4px auto -30px auto;" />
From here, we are going to check the available databases in MySQL server. To do this, run the following:
<script src="https://gist.github.com/alstat/1dbad1187130a31091aead6145dc0151.js"></script>
Indeed, there are four out-of-the-box defined databases already, and we don’t want to touch that. Instead, we going to create our own database, let’s call it <code>tutorial</code>. To do this, run the following codes:
<script src="https://gist.github.com/alstat/3d62031b3a0f2f2236568ffe0b9ec189.js"></script>
The best thing about SQL syntax is that, everything is self-explanatory, except maybe for line 19, which simply confirmed that we are using <code>tutorial</code> as our database.</p>
<h3 id="query-creating-table">Query: Creating Table</h3>
<p>Next is to create a table for our database, we are going to use the <a href="https://halalanresults.abs-cbn.com/">2019 Philippine Senatorial Election results</a> with columns: Last Name, First Name, Party, Votes. Further, for purpose of illustration, we are going to use the top 5 only.
<script src="https://gist.github.com/alstat/79d2c2c420a781d14834ef2307413045.js"></script></p>
<h3 id="query-inserting-values">Query: Inserting Values</h3>
<p>The following codes will insert the top five senators from the 2019 Philippine election results.
<script src="https://gist.github.com/alstat/771051ecfca7075229a965e5861353f8.js"></script></p>
<h3 id="query-show-data">Query: Show Data</h3>
<p>To view the encoded data, we simply select all (<code>*</code>) the columns from the table.
<script src="https://gist.github.com/alstat/dd620c5151a14261d8095d614d80b81a.js"></script></p>
<h2 id="mysql-clients-on-julia-and-python">MySQL Clients on Julia and Python</h2>
<p>In this section, we are going to interface with MySQL server on Julia and Python. This is possible using <a href="https://github.com/JuliaDatabases/MySQL.jl">MySQL.jl</a> and <a href="https://pymysql.readthedocs.io/en/latest/index.html">PyMySQL</a> libraries. To start with, install the necessary libraries as follows:</p>
<div class="tab" style="margin-bottom: -16px;">
  <button class="tablinks" onclick="openCity(event, 'julia-062819-1', 'tabcontent-1')">Julia</button>
  <button class="tablinks" onclick="openCity(event, 'python-062819-1', 'tabcontent-1')">Python</button>
</div>

<div id="julia-062819-1" class="tabcontent-1 first">
  <script src="https://gist.github.com/alstat/844cee7187081181baea0aeb13efafa7.js"></script>
</div>

<div id="python-062819-1" class="tabcontent-1" style="display: none;">
  <script src="https://gist.github.com/alstat/f38f27e23bc74549930bd439af5075f9.js"></script>
</div>
<p>For this exercise, our goal is to save the NYC Flights data into the database and query it from Julia and Python.</p>

<h3 id="downloading-nyc-flights-data">Downloading NYC Flights Data</h3>
<p>I have a copy of the dataset on Github, and so the following code will download the said data:</p>
<div class="tab" style="margin-bottom: -16px;">
  <button class="tablinks" onclick="openCity(event, 'julia-062819-2', 'tabcontent-2')">Julia</button>
  <button class="tablinks" onclick="openCity(event, 'python-062819-2', 'tabcontent-2')">Python</button>
</div>

<div id="julia-062819-2" class="tabcontent-2 first">
  <script src="https://gist.github.com/alstat/c0cf42053baa058cb3336867d9040d1d.js"></script>
</div>

<div id="python-062819-2" class="tabcontent-2" style="display: none;">
  <script src="https://gist.github.com/alstat/47d181a0efd1a63b829eded83cfe7402.js"></script>
</div>

<h3 id="connect-to-mysql-server">Connect to MySQL Server</h3>
<p>In order for the client to send request to the MySQL server, it needs to connect to it using the credentials set in the installation.</p>
<div class="tab" style="margin-bottom: -16px;">
  <button class="tablinks" onclick="openCity(event, 'julia-062819-3', 'tabcontent-3')">Julia</button>
  <button class="tablinks" onclick="openCity(event, 'python-062819-3', 'tabcontent-3')">Python</button>
</div>

<div id="julia-062819-3" class="tabcontent-3 first">
  <script src="https://gist.github.com/alstat/ef8e9274a0abf17055fa1cd35e343b02.js"></script>
</div>

<div id="python-062819-3" class="tabcontent-3" style="display: none;">
  <script src="https://gist.github.com/alstat/e7b04fe16d4ae8f324ba2eab2fe3a47e.js"></script>
</div>
<p>Note that you need to have a strong password, and this configuration should not be exposed to the public, but we are doing it here for purpose of illustration.</p>
<h3 id="first-request">First Request</h3>
<p>To test the connection, let’s send our first request — to show the tables in the database:</p>
<div class="tab" style="margin-bottom: -16px;">
  <button class="tablinks" onclick="openCity(event, 'julia-062819-4', 'tabcontent-4')">Julia</button>
  <button class="tablinks" onclick="openCity(event, 'python-062819-4', 'tabcontent-4')">Python</button>
</div>

<div id="julia-062819-4" class="tabcontent-4 first">
  <script src="https://gist.github.com/alstat/ab4d2403017c7b0a2e57e87590b202ad.js"></script>
</div>

<div id="python-062819-4" class="tabcontent-4" style="display: none;">
  <script src="https://gist.github.com/alstat/84b1c60e618d93b00ab2294c13438c35.js"></script>
</div>

<h3 id="create-nyc-flights-table">Create NYC Flights Table</h3>
<p>At this point, we can now create the table for our dataset. To do this, run the following:</p>
<div class="tab" style="margin-bottom: -16px;">
  <button class="tablinks" onclick="openCity(event, 'julia-062819-5', 'tabcontent-5')">Julia</button>
  <button class="tablinks" onclick="openCity(event, 'python-062819-5', 'tabcontent-5')">Python</button>
</div>

<div id="julia-062819-5" class="tabcontent-5 first">
  <script src="https://gist.github.com/alstat/edd6aff9b0d5fc9a45b808b36a2d3f95.js"></script>
</div>

<div id="python-062819-5" class="tabcontent-5" style="display: none;">
  <script src="https://gist.github.com/alstat/890fe4cdc2e50f694a749448594cb248.js"></script>
</div>
<p>You can manually write the SQL query to create the table, or automate it like what we have above. To check if we have indeed created the table, run the following codes:</p>
<div class="tab" style="margin-bottom: -16px;">
  <button class="tablinks" onclick="openCity(event, 'julia-062819-6', 'tabcontent-6')">Julia</button>
  <button class="tablinks" onclick="openCity(event, 'python-062819-6', 'tabcontent-6')">Python</button>
</div>

<div id="julia-062819-6" class="tabcontent-6 first">
  <script src="https://gist.github.com/alstat/3694845948496741bd3256729a1d8469.js"></script>
</div>

<div id="python-062819-6" class="tabcontent-6" style="display: none;">
  <script src="https://gist.github.com/alstat/789b5aae723486aee01b6c018e61c60a.js"></script>
</div>
<p>As you can see, we’ve created it with no entry yet.</p>
<h3 id="populating-the-table">Populating the Table</h3>
<p>Finally, we are going to populate the table in the database by inserting the values row by row.</p>
<div class="tab" style="margin-bottom: -16px;">
  <button class="tablinks" onclick="openCity(event, 'julia-062819-7', 'tabcontent-7')">Julia</button>
  <button class="tablinks" onclick="openCity(event, 'python-062819-7', 'tabcontent-7')">Python</button>
</div>

<div id="julia-062819-7" class="tabcontent-7 first">
  <script src="https://gist.github.com/alstat/c8ee6c05a99d9cd0f4270dd8a8beb984.js"></script>
</div>

<div id="python-062819-7" class="tabcontent-7" style="display: none;">
  <script src="https://gist.github.com/alstat/2f22ad0b1dd5f3ed39f360d2244c32f7.js"></script>
</div>
<p>Notice from the above code, the result of the <code>stmt</code> is an SQL <code>INSERT</code> query with placeholder values indicated by <code>?</code>. The timed (<code>@time</code> in Julia code) loop in line 8 above pushes the values in vector into the SQL statement <code>stmt</code>, by mapping one-to-one the values of the vector into the tuples of <code>?</code> in <code>stmt</code>. To check if we have indeed populated the table, run the following:</p>
<div class="tab" style="margin-bottom: -16px;">
  <button class="tablinks" onclick="openCity(event, 'julia-062819-8', 'tabcontent-8')">Julia</button>
  <button class="tablinks" onclick="openCity(event, 'python-062819-8', 'tabcontent-8')">Python</button>
</div>

<div id="julia-062819-8" class="tabcontent-8 first">
  <script src="https://gist.github.com/alstat/40c790d0216614cdcbf41de31dfa4e1a.js"></script>
</div>

<div id="python-062819-8" class="tabcontent-8" style="display: none;">
  <script src="https://gist.github.com/alstat/09cf619f91773599b9902ba77fde7d76.js"></script>
</div>

<h3 id="benchmark">Benchmark</h3>
<p>For the benchmark, I recorded the time interval of populating the table by sending request to the MySQL server. I also recorded the reading time of the server response on the populated table. The figure below, summarizes the results.
<img src="http://drive.google.com/uc?export=view&amp;id=1fhMJg3qIPupf3xhvyCW1p5Ph7tzn7UAH" /></p>
<h3 id="conclusion">Conclusion</h3>
<p>In conclusion, I would say MySQL.jl is a stable Julia library for interfacing with MySQL database. While both libraries are not directly comparable in terms of the language.</p>
<h3 id="software-versions">Software Versions</h3>
<script src="https://gist.github.com/alstat/65dab0d062ea0fd229b4aa23c18fcd21.js"></script>


    </div>
    <div class="pagination">
        <!-- 
            <span class="tooltip">
                <button class="previous-article" onclick='javascript:location.href="/julia/python/packages/knet/flux/tensorflow/machine-learning/deep-learning/2019/06/20/Deep-Learning-Exploring-High-Level-APIs-of-Knet.jl-and-Flux.jl-in-comparison-to-Tensorflow-Keras.html"'>Previous Article</button>
                <span class="tooltiptext">Deep Learning: Exploring High Level APIs of Knet.jl and Flux.jl in comparison to Tensorflow-Keras</span>
            </span>
         
          -->

        
            <!-- <div style="display: inline-block; width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: #fff; padding-right: 5px;">
                <a class="previous-article" href="/julia/python/packages/knet/flux/tensorflow/machine-learning/deep-learning/2019/06/20/Deep-Learning-Exploring-High-Level-APIs-of-Knet.jl-and-Flux.jl-in-comparison-to-Tensorflow-Keras.html"><i class="fas fa-chevron-circle-left" style="padding: 0 5px; font-size: 12.5px;"></i> Deep Learning: Exploring High Level APIs of Knet.jl and Flux.jl in comparison to Tensorflow-Keras</a>
            </div> -->
            <div style="display: inline-block; text-align: left; width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; padding-left: 10px; padding-right: 5px; background-color: #000; color: #fff;">
                <a class="previous-article" href="/julia/python/packages/knet/flux/tensorflow/machine-learning/deep-learning/2019/06/20/Deep-Learning-Exploring-High-Level-APIs-of-Knet.jl-and-Flux.jl-in-comparison-to-Tensorflow-Keras.html" style="padding-left: 0px; background-color: initial;">Deep Learning: Exploring High Level APIs of Knet.jl and Flux.jl in comparison to Tensorflow-Keras</a>
            </div>
        
        
    </div>
    <div class="rss-subscribe">
        <button class="rss-subscribe-button" onclick='javascript:location.href="/feed.xml"'>
            <i class="fas fa-rss" style="font-size:11px; margin: 0 2px 0 0;"></i>&nbsp;subscribe</button>
    </div>
    <br>
    <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'estadistika'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</article>

        </main>

        <!-- <footer class="site-footer">
    
      <div class="wrapper">
    
        <h2 class="footer-heading">Estadistika</h2>
    
        <div class="footer-col-wrapper">
          <div class="footer-col footer-col-1">
            <ul class="contact-list">
              <li>
                
                  Estadistika
                
                </li>
                
            </ul>
          </div>
    
          <div class="footer-col footer-col-2">
            <ul class="social-media-list">
              
              <li>
                <a href="https://github.com/jekyll"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">jekyll</span></a>

              </li>
              
    
              
              <li>
                <a href="https://twitter.com/jekyllrb"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">jekyllrb</span></a>

              </li>
              
            </ul>
          </div>
    
          <div class="footer-col footer-col-3">
            <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
          </div>
        </div>
    
      </div>
    
    </footer>
     -->

    </div>
</body>

</html>